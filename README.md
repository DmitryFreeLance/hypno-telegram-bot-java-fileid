# Hypno Telegram Bot (Java + TelegramBots 6.9.7.1 + SQLite + Docker)

–ë–æ—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–∑ –¢–ó:

- `/start` ‚Üí –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∫–Ω–æ–ø–∫–∞ **¬´–°—Ç–∞—Ä—Ç¬ª**
- –ø–æ –∫–Ω–æ–ø–∫–µ **¬´–°—Ç–∞—Ä—Ç¬ª** –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–Ω–∞–ª `CHANNEL_ID` (–Ω–∞–ø—Ä–∏–º–µ—Ä `-1003060928185`)
  - –µ—Å–ª–∏ –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω(–∞) ‚Üí –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ + –∫–Ω–æ–ø–∫–∞ **¬´–Ø –ø–æ–¥–ø–∏—Å–∞–ª–∞—Å—å¬ª** (–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
  - –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∞–Ω(–∞) ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–∞–∫—Ç–∏–∫–æ–π + –∫–Ω–æ–ø–∫–∞ **¬´–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É¬ª**
- **¬´–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É¬ª** ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞ + –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ + –∫–Ω–æ–ø–∫–∞ **¬´üëâ –°–∫–∞—á–∞—Ç—å –ß–µ–∫-–∞–ø (PDF)¬ª**
- **¬´üëâ –°–∫–∞—á–∞—Ç—å –ß–µ–∫-–∞–ø (PDF)¬ª** ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ PDF
- —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞ ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ + –∫–Ω–æ–ø–∫–∞ **¬´üì∫ –°–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ¬ª**
- **¬´üì∫ –°–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ¬ª** ‚Üí –±–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Å–ª–∞—Ç—å –ø–æ—Å—Ç –∏–∑ –∫–∞–Ω–∞–ª–∞ (`forwardMessage`), –µ—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É
- –¥–∞–ª–µ–µ —Ü–µ–ø–æ—á–∫–∞ –∞–≤—Ç–æ-—Å–æ–æ–±—â–µ–Ω–∏–π: 24—á ‚Üí 4—á ‚Üí 24—á ‚Üí 5 —Å–µ–∫ ‚Üí 3—á (–ø–æ—Å–ª–µ–¥–Ω–µ–µ ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –Ω–∞–∂–∞–ª–∏ ‚Äú–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è‚Äù)

SQLite –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (jobs), —á—Ç–æ–±—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ —Ç–µ—Ä—è–ª–æ—Å—å.

–¢–∞–∫–∂–µ –±–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç Telegram `file_id` –¥–ª—è –∞—É–¥–∏–æ –∏ PDF (–≤ —Ç–∞–±–ª–∏—Ü—É `file_cache`). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏** –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ `file_id` ‚Äî –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

---

## –í–∞–∂–Ω–æ –ø—Ä–æ –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∫–∏

Telegram —Ä–∞–∑—Ä–µ—à–∞–µ—Ç `getChatMember` —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ **–±–æ—Ç —Å–æ—Å—Ç–æ–∏—Ç –≤ –∫–∞–Ω–∞–ª–µ** (–æ–±—ã—á–Ω–æ ‚Äî –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).
–î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª `hypno_FAQ` –∏ –¥–∞–π—Ç–µ –µ–º—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–∑–æ–≤—ã—Ö, –Ω–æ –≥–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ —á–∏—Ç–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤).

–ò—Å—Ç–æ—á–Ω–∏–∫: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram Bot API –ø–æ `getChatMember`.  
https://core.telegram.org/bots/api

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (ENV)

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:

- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- `BOT_USERNAME` ‚Äî username –±–æ—Ç–∞ –±–µ–∑ @ (–Ω–∞–ø—Ä–∏–º–µ—Ä `my_hypno_bot`)

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:

- `DB_PATH` ‚Äî –ø—É—Ç—å –∫ sqlite –±–∞–∑–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/data/bot.db`)
- `CHANNEL_ID` ‚Äî –∫–∞–Ω–∞–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä `-1003060928185`)
- `FAQ_CHANNEL_ID` ‚Äî –∫–∞–Ω–∞–ª, –æ—Ç–∫—É–¥–∞ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –ø–æ—Å—Ç—ã (–æ–±—ã—á–Ω–æ —Ç–æ—Ç –∂–µ)
- `PRACTICE_AUDIO_PATH` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É `–í—Å—Ç—Ä–µ—á–∞ —Å –±—É–¥—É—â–∏–º –Ø.m4a` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/assets/–í—Å—Ç—Ä–µ—á–∞ —Å –±—É–¥—É—â–∏–º –Ø.m4a`)
- `CHECKUP_PDF_PATH` ‚Äî –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É `–ß–ï–ö-–ê–ü.pdf` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/assets/–ß–ï–ö-–ê–ü.pdf`)
- `VIDEO_POST_ID` ‚Äî id –ø–æ—Å—Ç–∞ –¥–ª—è ‚Äú–°–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ‚Äù (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `135`)
- `ANNA_POST_URL` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—é –ê–Ω–Ω—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `https://t.me/hypno_FAQ/112`)
- `MAXIM_POST_URL` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—é –ú–∞–∫—Å–∏–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `https://t.me/hypno_FAQ/140`)
- `BOOK_USERNAME` ‚Äî username –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `katherine_hypno`)
- `SCHEDULER_POLL_SECONDS` ‚Äî —á–∞—Å—Ç–æ—Ç–∞ –æ–ø—Ä–æ—Å–∞ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `10`)
- `LOG_LEVEL` ‚Äî `INFO` / `DEBUG` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `INFO`)

---

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Docker

```bash
export BOT_TOKEN="123:ABC"
export BOT_USERNAME="my_bot"
export CHANNEL_ID="-1003060928185"
export FAQ_CHANNEL_ID="-1003060928185"
export PRACTICE_AUDIO_PATH="/absolute/path/–í—Å—Ç—Ä–µ—á–∞ —Å –±—É–¥—É—â–∏–º –Ø.m4a"
export CHECKUP_PDF_PATH="/absolute/path/–ß–ï–ö-–ê–ü.pdf"
mvn -q -DskipTests package
java -jar target/hypno-telegram-bot-1.0.0-shaded.jar
```

---

## Docker build/run

### Build

```bash
docker build -t hypno-bot:latest .
```

### Run (–ø—Ä–∏–º–µ—Ä —Å–æ –≤—Å–µ–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏)

```bash
docker run -d --name hypno-bot \
  -e BOT_TOKEN="PUT_YOUR_TOKEN_HERE" \
  -e BOT_USERNAME="PUT_YOUR_BOT_USERNAME_HERE" \
  -e DB_PATH="/data/bot.db" \
  -e CHANNEL_ID="-1003060928185" \
  -e FAQ_CHANNEL_ID="-1003060928185" \
  -e PRACTICE_AUDIO_PATH="/assets/–í—Å—Ç—Ä–µ—á–∞ —Å –±—É–¥—É—â–∏–º –Ø.m4a" \
  -e CHECKUP_PDF_PATH="/assets/–ß–ï–ö-–ê–ü.pdf" \
  -e VIDEO_POST_ID="135" \
  -e ANNA_POST_URL="https://t.me/hypno_FAQ/112" \
  -e MAXIM_POST_URL="https://t.me/hypno_FAQ/140" \
  -e BOOK_USERNAME="katherine_hypno" \
  -e SCHEDULER_POLL_SECONDS="10" \
  -e LOG_LEVEL="INFO" \
  -v $(pwd)/data:/data \
  -v $(pwd)/assets:/assets:ro \
  --restart unless-stopped \
  hypno-bot:latest
```

### –ö—É–¥–∞ –∑–∞–∫–∏–¥—ã–≤–∞—Ç—å —Ñ–∞–π–ª—ã

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî —Ä—è–¥–æ–º —Å –ø—Ä–æ–µ–∫—Ç–æ–º —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `assets/` –∏ –ø–æ–ª–æ–∂–∏—Ç—å —Ç—É–¥–∞:

- `–í—Å—Ç—Ä–µ—á–∞ —Å –±—É–¥—É—â–∏–º –Ø.m4a`
- `–ß–ï–ö-–ê–ü.pdf`

–ò –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º `-v $(pwd)/assets:/assets:ro`.

–ï—Å–ª–∏ —É —Ñ–∞–π–ª–æ–≤ –¥—Ä—É–≥–∏–µ –∏–º–µ–Ω–∞/–ø–∞–ø–∫–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è–π—Ç–µ:

- `PRACTICE_AUDIO_PATH`
- `CHECKUP_PDF_PATH`

üí° –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –±–æ—Ç **–æ–¥–∏–Ω —Ä–∞–∑** —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç –∞—É–¥–∏–æ –∏ PDF, –æ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∏—Ö `file_id` –≤ SQLite (–≤ `.../data/bot.db`) –∏ —Å–º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –¥–∞–∂–µ –µ—Å–ª–∏ —Ñ–∞–π–ª–æ–≤ –±–æ–ª—å—à–µ –Ω–µ—Ç –≤ `assets/` (–ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –≤—ã –Ω–µ —É–¥–∞–ª—è–ª–∏ –±–∞–∑—É).

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø—Ä–æ –∫–Ω–æ–ø–∫—É ¬´–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è¬ª –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —á–∞—Å–∞

Telegram **–Ω–µ —Å–æ–æ–±—â–∞–µ—Ç –±–æ—Ç—É**, –Ω–∞–∂–∞–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å URL-–∫–Ω–æ–ø–∫—É (—ç—Ç–æ limitation Bot API).  
–ß—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏–µ ‚Äú–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∂–∏–º–∞–ª‚Äù, –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ:

- –∫–Ω–æ–ø–∫–∞ **¬´–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è¬ª** —Å–¥–µ–ª–∞–Ω–∞ –∫–∞–∫ callback-–∫–Ω–æ–ø–∫–∞,
- –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –±–æ—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Ñ–∞–∫—Ç –∫–ª–∏–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å URL-–∫–Ω–æ–ø–∫–æ–π **¬´‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å @... ¬ª**.

–¢–∞–∫ –º—ã –º–æ–∂–µ–º —á–µ—Å—Ç–Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ç–µ–º, –∫—Ç–æ —É–∂–µ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

- `users` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∏—Ö –ø—Ä–æ–≥—Ä–µ—Å—Å
- `jobs` ‚Äî –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (run_at + type), –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- `file_cache` ‚Äî —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ `file_id` –¥–ª—è –º–µ–¥–∏–∞ (–∞—É–¥–∏–æ/PDF)

---
